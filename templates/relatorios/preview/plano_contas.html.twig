{# Preview Plano de Contas #}
<div class="table-responsive">
    <table class="table table-striped table-hover table-sm">
        <thead class="table-dark">
            <tr>
                <th>Codigo</th>
                <th>Descricao</th>
                <th class="text-center">Tipo</th>
                <th class="text-center">Taxa Admin</th>
                <th class="text-center">IR</th>
                <th class="text-center">Informe</th>
                <th class="text-center">Status</th>
                {% if filtros.mostrar_totais %}
                    <th class="text-end">Total Movimentado</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% if dados is iterable and dados|length > 0 %}
                {% for conta in dados %}
                    <tr>
                        <td>
                            <code>{{ conta.codigo }}</code>
                        </td>
                        <td>{{ conta.descricao }}</td>
                        <td class="text-center">
                            {% set tipoClass = {0: 'success', 1: 'danger', 2: 'info', 3: 'warning'} %}
                            <span class="badge bg-{{ tipoClass[conta.tipo]|default('secondary') }}">
                                {{ conta.tipoDescricao }}
                            </span>
                        </td>
                        <td class="text-center">
                            {% if conta.incideTaxaAdmin %}
                                <i class="fas fa-check text-success"></i>
                            {% else %}
                                <i class="fas fa-times text-muted"></i>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if conta.incideIr %}
                                <i class="fas fa-check text-success"></i>
                            {% else %}
                                <i class="fas fa-times text-muted"></i>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if conta.entraInforme %}
                                <i class="fas fa-check text-success"></i>
                            {% else %}
                                <i class="fas fa-times text-muted"></i>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if conta.ativo %}
                                <span class="badge bg-success">Ativo</span>
                            {% else %}
                                <span class="badge bg-secondary">Inativo</span>
                            {% endif %}
                        </td>
                        {% if filtros.mostrar_totais %}
                            <td class="text-end">
                                {% if conta.totalMovimentado is defined and conta.totalMovimentado > 0 %}
                                    R$ {{ conta.totalMovimentado|number_format(2, ',', '.') }}
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="{% if filtros.mostrar_totais %}8{% else %}7{% endif %}" class="text-center text-muted py-4">
                        <i class="fas fa-info-circle fa-2x mb-2"></i><br>
                        Nenhuma conta encontrada com os filtros selecionados.
                    </td>
                </tr>
            {% endif %}
        </tbody>
        <tfoot class="table-light">
            <tr>
                <td colspan="{% if filtros.mostrar_totais %}8{% else %}7{% endif %}">
                    <strong>Total: {{ dados|length }} conta(s) encontrada(s)</strong>
                </td>
            </tr>
        </tfoot>
    </table>
</div>

{# Legenda #}
<div class="mt-3">
    <small class="text-muted">
        <strong>Legenda:</strong>
        <span class="badge bg-success ms-2">Receita</span>
        <span class="badge bg-danger ms-1">Despesa</span>
        <span class="badge bg-info ms-1">Transitoria</span>
        <span class="badge bg-warning ms-1">Caixa</span>
    </small>
</div>
