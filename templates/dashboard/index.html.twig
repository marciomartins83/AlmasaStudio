{% extends 'base.html.twig' %}

{% block title %}Dashboard Almasa{% endblock %}

{% block content %}
<div class="container my-4">
    <h2 class="fs-3 fw-bold mb-4 text-dark">Painel Administrativo</h2>
    <p class="text-secondary mb-4">
        Bem-vindo ao painel,
        <strong class="text-dark">{{ app.user.email }}</strong>
    </p>

    {# Seção Principal - Cadastros Gerais e Configurações #}
    <h3 class="mb-3 text-dark">Cadastros e Configurações</h3>
    <div class="row g-4">
        {% set cards_gerais = [
            {'title': 'Endereços', 'description': 'Gerencie os dados de endereços.', 'link': path('app_enderecos'), 'icon': 'geo-alt', 'details': 'Aqui você pode gerenciar estados, cidades, bairros e logradouros.'},
            {'title': 'Tipos', 'description': 'Gerencie os tipos de cadastros do sistema.', 'link': path('app_dashboard_tipos_index'), 'icon': 'box', 'details': 'Aqui você pode configurar tipos de documentos, contas e telefones, estado civil, nacionalidades e naturalidades.'},
            {'title': 'Emails', 'description': 'Gerencie os emails cadastrados.', 'link': path('app_email_index'), 'icon': 'envelope', 'details': 'Aqui você pode cadastrar e gerenciar emails do sistema.'},
            {'title': 'Telefones', 'description': 'Gerencie os telefones cadastrados.', 'link': path('app_telefone_index'), 'icon': 'telephone', 'details': 'Aqui você pode cadastrar e gerenciar telefones do sistema.'},
            {'title': 'Agências', 'description': 'Cadastre e gerencie as agências bancárias.', 'link': path('app_agencia_index'), 'icon': 'bank', 'details': 'Gerencie informações das agências bancárias utilizadas no sistema.'},
            {'title': 'Contas Bancárias', 'description': 'Gerencie contas bancárias e transações.', 'link': path('app_conta_bancaria_index'), 'icon': 'wallet-fill', 'details': 'Gerencie contas bancárias e transações financeiras do sistema.'}
        ] %}

        {% for card in cards_gerais %}
        <div class="col-md-4">
            <div class="almasa-card h-100" style="cursor: pointer;" onclick="window.location='{{ card.link }}'">
                <div class="almasa-card-body">
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-{{ card.icon }} fs-2 almasa-text-gradient me-2"></i>
                        <h3 class="fs-5 fw-semibold m-0">{{ card.title }}</h3>
                    </div>
                    <p class="text-secondary">{{ card.description }}</p>
                    <button class="btn btn-link p-0 almasa-text-gradient" onclick="event.stopPropagation(); toggleDetails('geral-{{ loop.index }}')">
                        Ver mais →
                    </button>
                    <p id="details-geral-{{ loop.index }}" class="text-muted mt-2 d-none">{{ card.details }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {# Seção Financeiro e Documentos #}
    <h3 class="mt-5 mb-3 text-dark">Financeiro e Documentos</h3>
    <div class="row g-4">
        {% set cards_financeiro = [
            {'title': 'Bancos', 'description': 'Lista de bancos cadastrados.', 'link': path('app_banco_index'), 'icon': 'bank2', 'details': 'Gerencie os bancos disponíveis para transações financeiras.'},
            {'title': 'Imóveis', 'description': 'Gerencie o cadastro completo de imóveis.', 'link': path('app_imovel_index'), 'icon': 'building', 'details': 'Cadastro completo com 63 campos: proprietário, endereço, valores, características, propriedades, fotos, medidores e documentação.'},
            {'title': 'Contratos', 'description': 'Gerencie contratos de locação.', 'link': path('app_contrato_index'), 'icon': 'file-earmark-text', 'details': 'Sistema completo de gestão de contratos de locação: cadastro, renovação, encerramento, reajustes automáticos e estatísticas.'},
            {'title': 'Ficha Financeira', 'description': 'Gerencie lançamentos e contas a receber.', 'link': path('app_financeiro_index'), 'icon': 'cash-stack', 'details': 'Sistema completo de contas a receber: lançamentos automáticos, baixas, estornos, ficha do inquilino, inadimplentes e estatísticas.'},
            {'title': 'Informe de Rendimentos', 'description': 'Gerencie informes de rendimentos e DIMOB.', 'link': path('app_informe_rendimento_index'), 'icon': 'file-earmark-bar-graph', 'details': 'Processamento, manutenção e impressão de informes de rendimentos. Geração de arquivo DIMOB para Receita Federal.'},
            {'title': 'Boletos', 'description': 'Emissão e gestão de boletos bancários.', 'link': path('app_boleto_index'), 'icon': 'receipt', 'details': 'Sistema completo de boletos: emissão, registro via API Santander, consulta de status, baixa, impressão e operações em lote.'},
            {'title': 'API Bancária', 'description': 'Configure credenciais para integração com APIs de cobrança.', 'link': path('app_configuracao_api_banco_index'), 'icon': 'gear', 'details': 'Configure Client ID, Client Secret e certificados digitais para integração com APIs bancárias (Santander, etc.).'},
            {'title': 'Relatórios', 'description': 'Gerencie relatórios do sistema.', 'link': path('app_relatorios_index'), 'icon': 'graph-up', 'details': 'Acesse diversos relatórios de gestão do sistema.'}
        ] %}

        {% for card in cards_financeiro %}
        <div class="col-md-4">
            <div class="almasa-card h-100" style="cursor: pointer;" onclick="window.location='{{ card.link }}'">
                <div class="almasa-card-body">
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi bi-{{ card.icon }} fs-2 almasa-text-gradient me-2"></i>
                        <h3 class="fs-5 fw-semibold m-0">{{ card.title }}</h3>
                    </div>
                    <p class="text-secondary">{{ card.description }}</p>
                    <button class="btn btn-link p-0 almasa-text-gradient" onclick="event.stopPropagation(); toggleDetails('financeiro-{{ loop.index }}')">
                        Ver mais →
                    </button>
                    <p id="details-financeiro-{{ loop.index }}" class="text-muted mt-2 d-none">{{ card.details }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    {# Seção Pessoas - Centralizada #}
<h3 class="mt-5 mb-3 text-dark">Gestão de Pessoas</h3>
<div class="row g-4">
    <div class="col-md-4">
        <div class="almasa-card h-100" style="cursor: pointer;" onclick="window.location='{{ path('app_pessoa_index') }}'">
            <div class="almasa-card-body">
                <div class="d-flex align-items-center mb-2">
                    <i class="bi bi-people fs-2 almasa-text-gradient me-2"></i>
                    <h3 class="fs-5 fw-semibold m-0">Pessoas</h3>
                </div>
                <p class="text-secondary">Gerencie fiadores, corretores, locadores e todos os tipos de pessoas do sistema.</p>
                <button class="btn btn-link p-0 almasa-text-gradient" onclick="event.stopPropagation(); toggleDetails('pessoa-geral')">
                    Ver mais →
                </button>
                <p id="details-pessoa-geral" class="text-muted mt-2 d-none">Acesse o cadastro centralizado para adicionar, editar e visualizar todas as pessoas.</p>
            </div>
        </div>
    </div>
</div>
<script src="{{ asset('js/dashboard/dashboard.js') }}"></script>
{% endblock %}