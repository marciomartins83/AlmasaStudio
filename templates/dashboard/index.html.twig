{% extends 'base.html.twig' %}

{% block title %}Dashboard Almasa
{% endblock %}

{% block content %}
	<div class="container my-4">
		<h2 class="fs-3 fw-bold mb-4 text-dark">Painel Administrativo</h2>
		<p class="text-secondary mb-4">
			Bem-vindo ao painel,
			<strong class="text-dark">{{ app.user.email }}</strong>
		</p>

		<div class="row g-4">
			{% set cards = [
				{'title': 'Endereços', 'description': 'Gerencie os dados de endereços.', 'link': path('app_enderecos'), 'icon': 'geo-alt', 'details': 'Aqui você pode gerenciar estados, cidades, bairros e logradouros.'},
				{'title': 'Tipos', 'description': 'Gerencie os tipos de cadastros do sistema.', 'link': path('app_tipos'), 'icon': 'box', 'details': 'Aqui você pode configurar tipos de documentos, contas e telefones.'},
				{'title': 'Bancos', 'description': 'Lista de bancos cadastrados.', 'link': '#', 'icon': 'bank', 'details': 'Gerencie os bancos disponíveis para transações financeiras.'},
				{'title': 'Pessoas', 'description': 'Lista de pessoas cadastradas.', 'link': path('app_pessoa'), 'icon': 'people', 'details': 'Aqui você pode cadastrar clientes, locatários e fiadores.'},
				{'title': 'Papel', 'description': 'Lista de papéis do sistema.', 'link': '#', 'icon': 'file-earmark-text', 'details': 'Gerencie os diferentes papéis disponíveis no sistema.'},
				{'title': 'Fiadores', 'description': 'Lista de fiadores cadastrados.', 'link': '#', 'icon': 'person-badge', 'details': 'Adicione e controle fiadores para contratos.'},
				{'title': 'Imóveis', 'description': 'Lista de imóveis cadastrados.', 'link': '#', 'icon': 'house-door', 'details': 'Aqui você pode cadastrar e gerenciar os imóveis disponíveis.'},
				{'title': 'Locatários', 'description': 'Lista de locatários cadastrados.', 'link': '#', 'icon': 'person-lines-fill', 'details': 'Gerencie os locatários e seus contratos.'},
				{'title': 'Proprietários', 'description': 'Lista de proprietários cadastrados.', 'link': '#', 'icon': 'person-check', 'details': 'Controle os proprietários dos imóveis cadastrados.'},
				{'title': 'Contas', 'description': 'Lista de contas cadastradas.', 'link': '#', 'icon': 'wallet', 'details': 'Gerencie contas e transações financeiras.'},
				{'title': 'Informe de Rendimentos', 'description': 'Gerencie os informes de rendimentos.', 'link': '#', 'icon': 'file-earmark-bar-graph', 'details': 'Aqui você pode visualizar e gerar informes de rendimento.'},
				{'title': 'Boletos', 'description': 'Lista de boletos cadastrados.', 'link': '#', 'icon': 'receipt', 'details': 'Gerencie a emissão e pagamento de boletos.'}
			] %}

			{% for card in cards %}
				<div class="col-md-4">
					<!-- Adicionando o redirecionamento apenas se o usuário clicar no card, mas não no botão -->
					<div class="card shadow-sm border-0 h-100" style="cursor: pointer;" onclick="window.location='{{ card.link }}'">
						<div class="card-body">
							<div class="d-flex align-items-center mb-2">
								<i class="bi bi-{{ card.icon }} fs-2 text-primary me-2"></i>
								<h3 class="fs-5 fw-semibold m-0">{{ card.title }}</h3>
							</div>
							<p class="text-secondary">{{ card.description }}</p>
							<!-- O botão "Ver mais" expande a descrição, mas NÃO redireciona -->
							<button class="btn btn-link p-0 text-primary" onclick="event.stopPropagation(); toggleDetails('{{ loop.index }}')">
								Ver mais →
							</button>
							<p id="details-{{ loop.index }}" class="text-muted mt-2 d-none">{{ card.details }}</p>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

	<!-- Script para expandir detalhes -->
	<script>
		function toggleDetails(index) {
			const details = document.getElementById("details-" + index);
			details.classList.toggle("d-none");
		}
	</script>
{% endblock %}
